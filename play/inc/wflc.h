/**
 * *********************************************************************************************************************
 *  __     __  __
 * |  |   |__ |__
 * |__| X |   |     FlyingFish
 *
 * *********************************************************************************************************************
 * @author      imindude@gmail.com
 * *********************************************************************************************************************
 */

#ifndef __WFLC_H__
#define __WFLC_H__

/* ****************************************************************************************************************** */

#include "typedef.h"
#include "maths.h"

/* ****************************************************************************************************************** */

#define FUNDAMENTAL_FREQ_GAIN       0.00001f        // μ0: adaptive gain for fundamental frequency
#define REF_INPUT_VECTOR_GAIN       0.1f            // μ1: adaptive gain for reference input vector
#define FUNDAMENTAL_ANGULAR_FREQ    (M_PI * 2.0f)   // ω0: fundamental angular frequency

typedef void    *WflcHandle;

/* ****************************************************************************************************************** */

extern WflcHandle   wflc_init(float mu0, float mu1, float omega0);
extern void         wflc_reset(WflcHandle h, float omega0);
extern float        wflc_update(WflcHandle h, float x, float dt);

/* ****************************************************************************************************************** */

#endif  // __WFLC_H__

/* end of file ****************************************************************************************************** */
